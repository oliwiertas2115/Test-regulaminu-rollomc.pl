<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rekrutacja - Test z Regulaminu</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00ff88;
            --secondary: #121212;
            --accent: #5865F2;
            --bg: #0a0a0a;
            --card-bg: rgba(25, 25, 25, 0.95);
            --text: #e0e0e0;
            --danger: #ff4d4d;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Roboto', sans-serif;
            background: radial-gradient(circle at center, #1a1a1a 0%, #050505 100%);
            color: var(--text);
            margin: 0;
            padding: 40px 10px;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 850px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            position: relative;
            animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        @keyframes slideUp {
            0% { opacity: 0; transform: translateY(50px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        .logo {
            display: block;
            margin: 0 auto 30px;
            max-width: 160px;
            filter: drop-shadow(0 0 15px var(--primary));
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px var(--primary)); }
            50% { transform: scale(1.05); filter: drop-shadow(0 0 25px var(--primary)); }
        }

        h1 {
            font-family: 'Rajdhani', sans-serif;
            text-align: center;
            color: var(--primary);
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 50px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .q-box {
            background: rgba(255, 255, 255, 0.02);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s ease;
        }

        .q-box:hover {
            border-color: var(--primary);
            background: rgba(0, 255, 136, 0.03);
            transform: translateX(10px);
        }

        label {
            display: block;
            margin-bottom: 15px;
            font-weight: 700;
            font-size: 1.1rem;
            color: #fff;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px 20px;
            background: #000;
            border: 2px solid #333;
            border-radius: 12px;
            color: var(--primary);
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }

        .options { display: grid; gap: 15px; }

        .opt-btn {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            border: 1px solid #333;
            transition: 0.3s;
        }

        .opt-btn:hover {
            background: #252525;
            border-color: var(--accent);
        }

        .opt-btn input {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
        }

        .btn-send {
            width: 100%;
            padding: 20px;
            background: linear-gradient(45deg, var(--primary), #00cc6e);
            color: #000;
            border: none;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 900;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: 0.4s;
            box-shadow: 0 10px 20px rgba(0, 255, 136, 0.2);
        }

        .btn-send:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 255, 136, 0.4);
        }

        /* ADMIN PANEL */
        #admin-section { display: none; margin-top: 60px; width: 100%; max-width: 900px; animation: fadeIn 1s; }
        .result-card {
            background: #111;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            border: 1px solid #222;
            position: relative;
        }
        .wrong-ans { color: var(--danger); font-style: italic; }
        .del-btn {
            position: absolute; top: 20px; right: 20px;
            background: var(--danger); border: none; color: white;
            padding: 8px 15px; border-radius: 8px; cursor: pointer;
        }
        .score-badge {
            float: right; padding: 5px 15px; border-radius: 50px;
            background: var(--accent); font-weight: bold;
        }

        .footer-link {
            margin-top: 40px; color: #444; cursor: pointer; transition: 0.3s;
        }
        .footer-link:hover { color: var(--primary); }
    </style>
</head>
<body>

<div class="container" id="quiz-wrap">
    <img src="https://i.imgur.com/QAjfTie.png" class="logo" alt="Server Logo">
    <h1>Weryfikacja Gracza</h1>

    <div class="q-box">
        <label>Twoja nazwa użytkownika (Minecraft):</label>
        <input type="text" id="q1" required>
    </div>

    <div class="q-box">
        <label>Wymień niedozwolone modyfikacje:</label>
        <input type="text" id="q2" required>
    </div>

    <div class="q-box">
        <label>Jeśli mod posiada zakazaną funkcję, co wtedy? (Opcjonalne)</label>
        <input type="text" id="q3">
    </div>

    <div class="q-box">
        <label>Maksymalna ilość multikont na serwerze:</label>
        <input type="text" id="q4" required>
    </div>

    <div class="q-box">
        <label>Długość blokady za używanie cheatów:</label>
        <input type="text" id="q5" required>
    </div>

    <div class="q-box">
        <label>Jaki typ handlu jest surowo wzbroniony?</label>
        <input type="text" id="q6" required>
    </div>

    <div class="q-box">
        <label>Czy procesy komputera (Process Hacker) można sprawdzać bez zgody?</label>
        <div class="options">
            <label class="opt-btn"><input type="radio" name="q7" value="tak"> Tak, administracja może wszystko.</label>
            <label class="opt-btn"><input type="radio" name="q7" value="nie"> Nie, jest to zabronione.</label>
        </div>
    </div>

    <div class="q-box">
        <label>Które z wymienionych czynności są zakazane?</label>
        <div class="options">
            <label class="opt-btn"><input type="radio" name="q8" value="1"> Kopiowanie przedmiotów, Elytra exploit, Cheaty</label>
            <label class="opt-btn"><input type="radio" name="q8" value="2"> Tylko używanie Elytry i Cheatowanie</label>
            <label class="opt-btn"><input type="radio" name="q8" value="3"> Korzystanie z minimapy bez graczy</label>
        </div>
    </div>

    <button class="btn-send" onclick="sendTest()">Wyślij zgłoszenie</button>
</div>

<center>
    <div class="footer-link" onclick="openAdmin()">Dostęp dla personelu</div>
</center>

<div id="admin-section" class="container">
    <h1>Panel Zarządzania</h1>
    <div id="results-list"></div>
</div>

<script>
    const MOD_LIST = ["elytraswapper", "autototem", "inventorymove", "swingtrought", "quick elytra", "soupapi", "minimapa", "betterpvp", "nameprotect"];

    function sendTest() {
        // Walidacja pól wymaganych
        const requiredFields = ['q1', 'q2', 'q4', 'q5', 'q6'];
        for(let id of requiredFields) {
            if(!document.getElementById(id).value.trim()) {
                alert("Wypełnij wszystkie wymagane pola!");
                document.getElementById(id).focus();
                return;
            }
        }

        const q7Check = document.querySelector('input[name="q7"]:checked');
        const q8Check = document.querySelector('input[name="q8"]:checked');
        if(!q7Check || !q8Check) {
            alert("Zaznacz odpowiedzi w pytaniach wyboru!");
            return;
        }

        // Punktacja i błędy
        let score = 0;
        let errors = [];

        // Q2 - Mody
        let q2Val = document.getElementById('q2').value.toLowerCase();
        let foundMods = 0;
        MOD_LIST.forEach(m => { if(q2Val.includes(m)) { score++; foundMods++; } });
        if(foundMods === 0) errors.push("Nie wymienił żadnego zakazanego moda.");

        // Q3 - Zawsze zalicza jeśli coś wpisane (bo opcjonalne)
        if(document.getElementById('q3').value.length > 2) score++;

        // Q4 - Multikonta (Szukamy "2")
        if(document.getElementById('q4').value.includes('2')) { score++; } else { errors.push("Błąd w multikontach."); }

        // Q5 - 12 dni
        let q5Val = document.getElementById('q5').value.toLowerCase();
        if(q5Val.includes('12')) { score++; } else { errors.push("Błędny czas bana (powinno być 12)."); }

        // Q6 - Handel
        let q6Val = document.getElementById('q6').value.toLowerCase();
        if(q6Val.includes('real') || q6Val.includes('pieni')) { score++; } else { errors.push("Nie wspomniał o handlu za realne pieniądze."); }

        // Q7 - NIE (Opcja 2)
        if(q7Check.value === 'nie') { score++; } else { errors.push("Uważa, że można sprawdzać PH bez zgody."); }

        // Q8 - Opcja 1
        if(q8Check.value === '1') { score++; } else { errors.push("Błędna lista zakazanych czynności."); }

        const totalPotential = MOD_LIST.length + 6;
        const percent = Math.round((score / totalPotential) * 100);

        const submission = {
            nick: document.getElementById('q1').value,
            score: score,
            percent: percent,
            errors: errors,
            date: new Date().toLocaleString(),
            raw: [
                document.getElementById('q2').value,
                document.getElementById('q3').value,
                document.getElementById('q4').value,
                document.getElementById('q5').value,
                document.getElementById('q6').value
            ]
        };

        let database = JSON.parse(localStorage.getItem('server_db') || '[]');
        database.push(submission);
        localStorage.setItem('server_db', JSON.stringify(database));

        alert("Zgłoszenie wysłane! Dziękujemy.");
        location.reload();
    }

    function openAdmin() {
        const p = prompt("Hasło:");
        if(p === "admin") {
            document.getElementById('quiz-wrap').style.display = 'none';
            document.getElementById('admin-section').style.display = 'block';
            showResults();
        }
    }

    function showResults() {
        const list = document.getElementById('results-list');
        const db = JSON.parse(localStorage.getItem('server_db') || '[]');
        list.innerHTML = db.length === 0 ? "<p>Brak zgłoszeń.</p>" : "";

        db.reverse().forEach((item, i) => {
            const errHtml = item.errors.map(e => `<li class="wrong-ans">${e}</li>`).join('');
            list.innerHTML += `
                <div class="result-card">
                    <button class="del-btn" onclick="deleteEntry(${i})">Usuń</button>
                    <span class="score-badge">${item.percent}%</span>
                    <h3>${item.nick}</h3>
                    <p><small>${item.date}</small></p>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9rem;">
                        <div><b>Wymienione mody:</b> ${item.raw[0]}</div>
                        <div><b>Multikonta:</b> ${item.raw[2]}</div>
                        <div><b>Czas bana:</b> ${item.raw[3]}</div>
                        <div><b>Handel:</b> ${item.raw[4]}</div>
                    </div>
                    <p><b>Wykryte błędy:</b></p>
                    <ul>${errHtml || "Brak błędów - wzorowy test!"}</ul>
                </div>
            `;
        });
    }

    function deleteEntry(i) {
        let db = JSON.parse(localStorage.getItem('server_db') || '[]');
        db.reverse().splice(i, 1);
        db.reverse();
        localStorage.setItem('server_db', JSON.stringify(db));
        showResults();
    }
</script>

</body>
</html>
